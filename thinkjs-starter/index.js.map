{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\api\\controller\\index.js"
    ],
    "names": [
        "Base",
        "require",
        "fs",
        "module",
        "exports",
        "index2Action",
        "banner",
        "model",
        "where",
        "ad_position_id",
        "select",
        "channel",
        "order",
        "sort_order",
        "newGoods",
        "field",
        "is_new",
        "limit",
        "hotGoods",
        "is_hot",
        "brandList",
        "new_sort_order",
        "topicList",
        "categoryList",
        "parent_id",
        "name",
        "newCategoryList",
        "categoryItem",
        "childCategoryIds",
        "id",
        "getField",
        "categoryGoods",
        "category_id",
        "push",
        "goodsList",
        "success",
        "newGoodsList",
        "hotGoodsList",
        "indexAction",
        "info",
        "submitUserInfoAction",
        "tData",
        "post",
        "getLoginUserId",
        "userSql",
        "user_id",
        "find",
        "userData",
        "setPropertyReverse",
        "Object",
        "keys",
        "length",
        "update",
        "add",
        "getSelectListEnableInfoAction",
        "data",
        "dataList",
        "user",
        "singleData",
        "userNo",
        "user_no",
        "birthday",
        "imageUrl",
        "image_url",
        "list",
        "getUserInfoAction",
        "undefined",
        "isGetSelfInfo",
        "setProperty",
        "addImageAction",
        "file",
        "console",
        "log",
        "path",
        "reader",
        "createReadStream",
        "filePath",
        "upStream",
        "createWriteStream",
        "pipe",
        "focusAction",
        "focusList",
        "userId",
        "period",
        "getPeriodNum",
        "selectData",
        "i",
        "think",
        "isEmpty",
        "getFocusListAction",
        "getFocusListInfoAction",
        "getFocusMeListInfoAction",
        "focuser",
        "selecter",
        "updateFocusDataAction",
        "delete",
        "j",
        "beFocuserFocusInfo",
        "isFocusEachOther",
        "k",
        "isFocusEach",
        "getFocusEachOtherListAction",
        "focusEachList",
        "applyAction",
        "fail"
    ],
    "mappings": "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",
    "file": "..\\..\\..\\src\\api\\controller\\index.js",
    "sourcesContent": [
        "const Base = require('./base.js');\r\nconst fs = require('fs')\r\nmodule.exports = class extends Base {\r\n\r\n  async index2Action() {\r\n    const banner = await this.model('ad').where({ad_position_id: 1}).select();\r\n    const channel = await this.model('channel').order({sort_order: 'asc'}).select();\r\n    const newGoods = await this.model('goods').field(['id', 'name', 'list_pic_url', 'retail_price']).where({is_new: 1}).limit(4).select();\r\n    const hotGoods = await this.model('goods').field(['id', 'name', 'list_pic_url', 'retail_price', 'goods_brief']).where({is_hot: 1}).limit(3).select();\r\n    const brandList = await this.model('brand').where({is_new: 1}).order({new_sort_order: 'asc'}).limit(4).select();\r\n    const topicList = await this.model('topic').limit(3).select();\r\n\r\n    const categoryList = await this.model('category').where({parent_id: 0, name: ['<>', '推荐']}).select();\r\n    const newCategoryList = [];\r\n    for (const categoryItem of categoryList) {\r\n      const childCategoryIds = await this.model('category').where({parent_id: categoryItem.id}).getField('id', 100);\r\n      const categoryGoods = await this.model('goods').field(['id', 'name', 'list_pic_url', 'retail_price']).where({category_id: ['IN', childCategoryIds]}).limit(7).select();\r\n      newCategoryList.push({\r\n        id: categoryItem.id,\r\n        name: categoryItem.name,\r\n        goodsList: categoryGoods\r\n      });\r\n    }\r\n\r\n    return this.success({\r\n      banner: banner,\r\n      channel: channel,\r\n      newGoodsList: newGoods,\r\n      hotGoodsList: hotGoods,\r\n      brandList: brandList,\r\n      topicList: topicList,\r\n      categoryList: newCategoryList\r\n    });\r\n  }\r\n  async indexAction() {\r\n    return this.success({\r\n      info: \"hello world\",\r\n    });\r\n  }\r\n  async submitUserInfoAction() {\r\n    const tData = this.post('data');\r\n    \r\n    const model = this.model('userinfo');\r\n\r\n    let id = this.getLoginUserId();\r\n    const userSql = await model.where({ user_id: id }).find();\r\n    // let userData = await model.where({ id: id });\r\n    const userData = {}\r\n    userData.user_id = id\r\n    this.setPropertyReverse(userData,tData,\"gender\",\"gender\")\r\n    this.setPropertyReverse(userData,tData,\"constellation\",\"constellation\")\r\n    this.setPropertyReverse(userData,tData,\"birthday\",\"birthday\")\r\n    this.setPropertyReverse(userData,tData,\"height\",\"height\")\r\n    this.setPropertyReverse(userData,tData,\"weight\",\"weight\")\r\n    this.setPropertyReverse(userData,tData,\"mobile\",\"mobile\")\r\n    this.setPropertyReverse(userData,tData,\"expect_age\",\"expectAge\")\r\n    this.setPropertyReverse(userData,tData,\"native_place\",\"nativePlace\")\r\n    this.setPropertyReverse(userData,tData,\"address\",\"address\")\r\n    this.setPropertyReverse(userData,tData,\"education\",\"education\")\r\n    this.setPropertyReverse(userData,tData,\"schoolinfo\",\"schoolInfo\")\r\n    this.setPropertyReverse(userData,tData,\"marry\",\"marry\")\r\n    this.setPropertyReverse(userData,tData,\"occupation\",\"occupation\")\r\n    this.setPropertyReverse(userData,tData,\"organization\",\"organization\")\r\n    this.setPropertyReverse(userData,tData,\"authorized\",\"authorized\")\r\n    this.setPropertyReverse(userData,tData,\"username\",\"userName\")\r\n    this.setPropertyReverse(userData,tData,\"wechat\",\"wetChatNo\")\r\n    this.setPropertyReverse(userData,tData,\"belief\",\"belief\")\r\n    this.setPropertyReverse(userData,tData,\"income_string\",\"incomeString\")\r\n    this.setPropertyReverse(userData,tData,\"nickname\",\"nickname\")\r\n    this.setPropertyReverse(userData,tData,\"password\",\"password\")\r\n    this.setPropertyReverse(userData,tData,\"publicData\",\"publicData\") \r\n    this.setPropertyReverse(userData,tData,\"meet\",\"meet\")\r\n    this.setPropertyReverse(userData,tData,\"one_child\",\"oneChild\")\r\n    this.setPropertyReverse(userData,tData,\"housecardesc\",\"houseCarDesc\")\r\n    this.setPropertyReverse(userData,tData,\"housecarinfo\",\"houseCarInfo\")\r\n    this.setPropertyReverse(userData,tData,\"public_school\",\"publicShcool\")\r\n    this.setPropertyReverse(userData,tData,\"family\",\"family\")\r\n    this.setPropertyReverse(userData,tData,\"manifesto\",\"manifesto\")\r\n    this.setPropertyReverse(userData,tData,\"join_databank\",\"joinDataBank\")\r\n    this.setPropertyReverse(userData,tData,\"public_data\",\"publicData\")\r\n    this.setPropertyReverse(userData,tData,\"public_shcool\",\"publicShcool\")\r\n    this.setPropertyReverse(userData,tData,\"image_url\",\"imageUrl\")\r\n    this.setPropertyReverse(userData,tData,\"qq\",\"qq\")\r\n    if (Object.keys(userSql).length != 0) {\r\n      model.update(userData)\r\n    }\r\n    else {\r\n      await model.add(userData);\r\n\r\n    }\r\n    // TODO 删除图片\r\n\r\n    return this.success();\r\n  }\r\n  async getSelectListEnableInfoAction() {\r\n    const data = this.post('data');\r\n    const model = this.model('userinfo');\r\n    const userData = await this.model('userinfo').field(['user_id', 'user_no', 'birthday',\"image_url\"]).select();\r\n    const dataList = []\r\n    for (const user of userData) {\r\n        const singleData = {}\r\n        singleData.id = user.user_id;\r\n        singleData.userNo = user.user_no;\r\n        singleData.birthday = user.birthday;\r\n        singleData.imageUrl = user.image_url;\r\n        dataList.push(singleData);\r\n    }\r\n    return this.success({\r\n      list: dataList,\r\n    });\r\n\r\n    return this.success();\r\n  }\r\n\r\n  async getUserInfoAction() {\r\n    const id = this.post('id');\r\n    if (id==undefined){\r\n      id = this.getLoginUserId();\r\n    }\r\n    const isGetSelfInfo = id==this.getLoginUserId()\r\n\r\n    // const model = this.model('userinfo');\r\n    const userData = await this.model('userinfo').where({ user_id: id }).find();\r\n    const data = {}\r\n    this.setProperty(userData,data,\"user_id\",\"id\")\r\n    this.setProperty(userData,data,\"gender\",\"gender\")\r\n    this.setProperty(userData,data,\"constellation\",\"constellation\")\r\n    this.setProperty(userData,data,\"birthday\",\"birthday\")\r\n    this.setProperty(userData,data,\"height\",\"height\")\r\n    this.setProperty(userData,data,\"weight\",\"weight\")\r\n    this.setProperty(userData,data,\"mobile\",\"mobile\")\r\n    this.setProperty(userData,data,\"expect_age\",\"expectAge\")\r\n    this.setProperty(userData,data,\"native_place\",\"nativePlace\")\r\n    this.setProperty(userData,data,\"address\",\"address\")\r\n    this.setProperty(userData,data,\"education\",\"education\")\r\n    this.setProperty(userData,data,\"schoolinfo\",\"schoolInfo\")\r\n    this.setProperty(userData,data,\"marry\",\"marry\")\r\n    this.setProperty(userData,data,\"occupation\",\"occupation\")\r\n    this.setProperty(userData,data,\"organization\",\"organization\")\r\n    this.setProperty(userData,data,\"authorized\",\"authorized\")\r\n    this.setProperty(userData,data,\"username\",\"userName\")\r\n    this.setProperty(userData,data,\"wechat\",\"wetChatNo\")\r\n    this.setProperty(userData,data,\"belief\",\"belief\")\r\n    this.setProperty(userData,data,\"income_string\",\"incomeString\")\r\n    this.setProperty(userData,data,\"nickname\",\"nickname\")\r\n    this.setProperty(userData,data,\"password\",\"password\")\r\n    this.setProperty(userData,data,\"publicData\",\"publicData\")\r\n    this.setProperty(userData,data,\"meet\",\"meet\")\r\n    this.setProperty(userData,data,\"public_school\",\"publicShcool\")\r\n    this.setProperty(userData,data,\"housecardesc\",\"houseCarDesc\")\r\n    this.setProperty(userData,data,\"housecarinfo\",\"houseCarInfo\")\r\n    this.setProperty(userData,data,\"one_child\",\"oneChild\")\r\n    this.setProperty(userData,data,\"family\",\"family\")\r\n    this.setProperty(userData,data,\"manifesto\",\"manifesto\")\r\n    this.setProperty(userData,data,\"join_databank\",\"joinDataBank\")\r\n    this.setProperty(userData,data,\"public_data\",\"publicData\")\r\n    this.setProperty(userData,data,\"public_shcool\",\"publicShcool\")\r\n    this.setProperty(userData,data,\"image_url\",\"imageUrl\")\r\n    this.setProperty(userData,data,\"qq\",\"qq\")\r\n\r\n\r\n    // tData.school_primary = data.school_primary?data.school_primary:undefined\r\n    // tData.school_junior_heigh = data.school_junior_heigh?data.school_junior_heigh:undefined\r\n    // tData.school_height = data.school_height?data.school_height:undefined\r\n    // tData.school_college = data.school_college?data.school_college:undefined\r\n    // tData.school_graduate = data.school_graduate?data.school_graduate:undefined\r\n    // tData.school_doctoral = data.school_doctoral?data.school_doctoral:undefined\r\n  \r\n\r\n    return this.success({\r\n      userData: data,\r\n    });\r\n\r\n    return this.success();\r\n  }\r\n\r\n  async addImageAction() {\r\n    // const img = this.post('img');\r\n    // var multer=require('multer');\r\n    // var upload=multer({dest:'uploads/'})\r\n    // upload.single(img)\r\n    // const express=require('express');\r\n    // const router=express.Router();\r\n    // //上传图片的模板\r\n    // //生成的图片放入uploads文件夹下\r\n    // //图片上传必须用post方法\r\n    // router.post('/img',upload.single(img),(req,res)=>{\r\n    //     console.log(req.file);\r\n    //     res.send('upload img')\r\n    // })\r\n    const file = this.file('fileImage') \r\n    console.log(\"addImageAction ： \" + file.path)\r\n    const reader = fs.createReadStream(file.path);\r\n    let filePath ='./www/static/'+file.name;//建议使用绝对路径\r\n    const upStream = fs.createWriteStream(filePath);\r\n\r\n    reader.pipe(upStream);\r\n    return this.success({\r\n      file: \"static/\"+file.name,\r\n    });\r\n  }\r\n\r\n  async focusAction(){\r\n    const focusList = this.post('focusList');\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const selectData = await this.model('selectinfo').where({ user_id: userId,period:period}).getField('period', true);\r\n    const data = {}\r\n    data.user_id = this.getLoginUserId()\r\n    data.period = this.getPeriodNum()\r\n    for (let i= 0;i<15;i++){\r\n      if (focusList[i]) {\r\n        data[\"select_\"+ i] = focusList[i]\r\n      }\r\n      else\r\n      {\r\n        data[\"select_\"+ i] = 0\r\n      }\r\n    }\r\n\r\n    if (think.isEmpty(selectData)) {\r\n      await this.model('selectinfo').add(data)\r\n    }\r\n    else{\r\n      await this.model('selectinfo').where({ user_id: this.getLoginUserId(),period:this.getPeriodNum()}).update(data)\r\n    }\r\n    return this.success({\r\n    });\r\n  }\r\n\r\n  async getFocusListAction(){\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const selectData = await this.model('selectinfo').where({ user_id: userId,period:period}).find();\r\n    let data = {}\r\n    data.focusList = []\r\n    for (let i= 0;i<15;i++){\r\n      if (selectData[\"select_\"+ i] && selectData[\"select_\"+ i] != 0 ) {\r\n        data.focusList.push(selectData[\"select_\"+ i])\r\n      }\r\n    }\r\n    data.userId = selectData.user_id\r\n    data.period = selectData.period\r\n    \r\n    return this.success(data);\r\n  }\r\n\r\n  async getFocusListInfoAction(){\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const selectData = await this.model('selectinfo').where({ user_id: userId,period:period}).find();\r\n    let data = {}\r\n    data.focusList = []\r\n    for (let i= 0;i<15;i++){\r\n      if (selectData[\"select_\"+ i] && selectData[\"select_\"+ i] != 0 ) {\r\n        const user = await this.model('userinfo').field(['user_id', 'user_no', 'birthday',\"image_url\"]).where({user_id:selectData[\"select_\"+ i]}).find();\r\n        if( !think.isEmpty(user)){\r\n        let singleData = {}\r\n            singleData.id = user.user_id;\r\n            singleData.userNo = user.user_no;\r\n            singleData.birthday = user.birthday;\r\n            singleData.imageUrl = user.image_url;\r\n            data.focusList.push(singleData);\r\n        }\r\n      }\r\n    }\r\n    data.userId = selectData.user_id\r\n    data.period = selectData.period\r\n    \r\n    return this.success(data);\r\n  }\r\n  async getFocusMeListInfoAction(){\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const selectData = await this.model('beselect').where({ user_id: userId,period:period}).select();\r\n    let data = {}\r\n    data.focusList = []\r\n    for (let i=0;i<selectData.length;i++){\r\n        let focuser = selectData[i].selecter\r\n        const user = await this.model('userinfo').field(['user_id', 'user_no', 'birthday',\"image_url\"]).where({user_id:focuser}).find();\r\n        if( !think.isEmpty(user)){\r\n        let singleData = {}\r\n            singleData.id = user.user_id;\r\n            singleData.userNo = user.user_no;\r\n            singleData.birthday = user.birthday;\r\n            singleData.imageUrl = user.image_url;\r\n            data.focusList.push(singleData);\r\n        }\r\n    }\r\n    data.userId = selectData.user_id\r\n    data.period = selectData.period\r\n    return this.success(data);\r\n  }\r\n  async updateFocusDataAction(){\r\n    const period = this.getPeriodNum();\r\n    await this.model('beselect').where({period:period}).delete()\r\n    const selectData = await this.model('selectinfo').where({period:period}).select();\r\n    for (let j=0;j<selectData.length;j++){\r\n      let singleData = selectData[j]\r\n      for (let i= 0;i<15;i++){\r\n        if (singleData[\"select_\"+ i] && singleData[\"select_\"+ i] != 0 ) {\r\n          let userId = singleData[\"select_\"+ i]\r\n          const beFocuserFocusInfo = await this.model('selectinfo').where({ user_id: userId,period:period}).find();\r\n          let isFocusEachOther = 0\r\n          if( !think.isEmpty(beFocuserFocusInfo)){\r\n            for (let k= 0;k<15;k++){\r\n              if (beFocuserFocusInfo[\"select_\"+ k] && beFocuserFocusInfo[\"select_\"+ k] == singleData.user_id ) {\r\n                isFocusEachOther = 1;\r\n              }\r\n            }\r\n          }\r\n          await this.model('beselect').add({user_id:userId,period:period,selecter:singleData.user_id,isFocusEach:isFocusEachOther})\r\n        }\r\n      }\r\n    }\r\n  }\r\n  async getFocusEachOtherListAction(){\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const focusEachList = await this.model('beselect').where({ user_id: userId,period:period,isFocusEach:true}).select();\r\n    let data = {}\r\n    data.focusList = []\r\n    for (let i=0;i<focusEachList.length;i++){\r\n        let focuser = focusEachList[i].selecter\r\n        const user = await this.model('userinfo').field(['user_id', 'user_no', 'birthday',\"image_url\"]).where({user_id:focuser}).find();\r\n        if( !think.isEmpty(user)){\r\n        let singleData = {}\r\n            singleData.id = user.user_id;\r\n            singleData.userNo = user.user_no;\r\n            singleData.birthday = user.birthday;\r\n            singleData.imageUrl = user.image_url;\r\n            data.focusList.push(singleData);\r\n        }\r\n    }\r\n    data.userId = userId\r\n    data.period = period\r\n    return this.success(data);\r\n  }\r\n\r\n  async applyAction(){\r\n    const userId = this.getLoginUserId()\r\n    const period = this.getPeriodNum()\r\n    const userData = await this.model('selectinfo').where({ user_id: userId,period:period}).find();\r\n    if( !think.isEmpty(userData)){\r\n      return this.fail('用户已报名');\r\n    }\r\n\r\n    const userNo = await this.model('selectinfo').where({ period:period}).select().length + 1;\r\n\r\n    await this.model('selectinfo').add({ user_id: userId,period:period,user_no:userNo});\r\n    await this.model('user').where({id:userId}).update({period:period,user_no:userNo});\r\n    const user = await this.model('userinfo').where({ user_id: userId}).find();\r\n    if( !think.isEmpty(user)){\r\n      this.model('userinfo').where({user_id:userId}).update({user_no:userNo})\r\n    }else{\r\n      this.model('userinfo').add({user_id:userId,user_no:userNo})\r\n    }\r\n\r\n    let data = {\r\n      userId:userId,\r\n      period:period,\r\n      userNo:userNo\r\n    }\r\n    return this.success(data);\r\n  }\r\n}\r\n"
    ]
}